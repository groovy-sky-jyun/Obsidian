
<br>

## BP_EquipWeaponMaster
땅에 떨어져있는 무기에 플레이어가 다가가 F키를 누르면 손에 장착하는 기능을 구현하려 한다. 

그러기 위해 손에 장착되는 무기에 대한 Master Blueprint를 구현할 것이다.

1. BP_EquipWeaponMaster를 생성한다.
2. Data Table와 BP_EquipWeaponMaster를 이용하여 child actor를 생성한다. (child actor가 손에 장착될 각 무기들이 된다.)

<br>

#### 1. BPI_Interface 생성
마우스를 우클릭하여 Blueprint Interface를 생성해준다.
![[Pasted image 20241006020112.png|400]]

생성한 Interface 에서 Add 버튼을 통해 PickUp이라는 함수를 생성해준다.
PickUp 함수의 Inputs 으로 (BP Character)PlayerCharacter를 지정해준다.
![[Pasted image 20241006020743.png]]

 #### <mark style="background: #D2B3FFA6;">TIPS</mark>
> #### #Interface
> Interface는 하나 이상의 클래스가 공통으로 가져야 하는 메서드가 있을 때 이를 정의할 수 있다. 단, 명세만 할 뿐 구현은 각각의 클래스에서 한다. 
> 
> 구현이 필수는 아니다. 그렇기에 특정 블루프린트가 가지고 있는 인터페이스의 함수를 구현하지 않는다고 해서 문제가 되지는 않는다. 
>
> Inputs는 PickUp 함수가 호출될 때 외부에서 전달받는 입력값을 지정해 주는 것이다.

<br>

#### 2. BP_PickUpWeaponMaster 에 함수 구현
BP_PickUpWeaponMaster에 들어가서 Class Settings를 눌러준다. 그런 뒤 Details 창의 Implemented Interfaces 에서 위에서 생성한 BPI_Interface를 추가해준다. 
![[Pasted image 20241006021410.png|500]]

그럼 BPI_Interface에서 정의된 PickUp 함수가 왼쪽 Interfaces에 생긴것을 확인할 수 있다. 이를 더블 클릭하면 Event Graph에 Event PickUp 노드가 생기는 것을 확인할 수 있다.
![[Pasted image 20241006022027.png|500]]

<br>

#### 3. PickUp Input
BP_Character에 F키를 눌렀을 때에 대한 PickUp Input을 구현해줄 것이다. 
우선 #GetOverlappingActors 노드를 통해 현재 클래스가 가지는 콜리전 영역 안에 다른 클래스가 겹쳐지게 있는지 확인할 수 있다. 

Class Filter를 BP_PickUpWeaponMaster 로 하여 영역 안에 겹쳐진 클래스 중 BP_PickUpWeaponMaster 가 있는지를 확인한다. 
![[Pasted image 20241006025602.png|400]]

그런 뒤 Get 노드를 통해 Overlapping Actors를 반환 받는다.
Get 노드에서 Interface의 PickUp 함수를 연결해준다.
![[Pasted image 20241006025726.png|500]]

그럼 PickUp 함수의 Target은 Overlapping Actors 이고, Player Character는 self 로 BP_Character가 된다.
![[Pasted image 20241006025823.png|500]]

 #### <mark style="background: #D2B3FFA6;">TIPS</mark>
> #### #GetOverlappingActors
> 현재 클래스가 가지는 콜리전 영역 안에 들어온 액터들을 가져올 수 있다.
> 다른 액터들과 겹쳐져 있는지 확인할 때 사용할 수 있다. 그 외에도 충돌 정보 등을 통해 overlap event도 처리할 수 있다.
> 
> Class Filter를 통해 겹쳐진 액터들 중 특정 클래스의 액터만 찾을 수도 있다.