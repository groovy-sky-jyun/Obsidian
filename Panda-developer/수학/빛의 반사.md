물체나 빛이 반사되는 것을 구현할 때 어떤 수학적 과정이 이루어지는지 알아보자.

### 반사 벡터
물체가 어딘가에 부딪혀 튕겨나가는것을 구현하려면 어떤 방향으로 얼만큼 튕겨야 할지를 나타내는 반사 벡터를 구해야 한다. 

이는 `입사 벡터`와 부딪힌 평면의 `법선벡터`(단위 1)로 구할 수 있다.

![[Group 8.png|입사 벡터와 법선 벡터|450]]

#### 반사 벡터 구하기
**1. 내적을 이용해 입사 벡터와 법선 벡터의 방향 일치도 구하기**

![[Group 9 1.png|(1) 반사 벡터 구하기|450]]
- 입사 벡터와 법선 벡터의 내적이 -3이라고 해보자.
	- `V⋅N`
	- `|V⋅N|` = 입사 벡터에서 평면에 내린 수선의 발 길이
- 이 값에 방향을 부여하기 위해 법선 벡터를 곱해준다.
	- `(V⋅N)N`
	- 내적 값이 음수이므로 방향은 법선 벡터의 반대 방향이다.

**2. -2를 곱하기**

![[Group 11.png|(2) 반사 벡터 구하기|450]]
- 방향을 법선 벡터와 일치시키기 위해 -1을 곱해준다.
	- `-(V⋅N)N`
- 입사 벡터의 시작점 위치와 동일하게 반사 벡터의 도착점 위치를 주기 위해 크기를 2배로 늘려준다. 
	- `-2(V⋅N)N`

**3. 입사 벡터를 더해준다.**

![[Group 10.png|(3) 반사 벡터 구하기|450]]
- 입사 벡터와 `(2)`에서 만든 벡터를 더해주면 입사각과 동일한 반사각을 가지는 반사 벡터를 만들 수 있다.
	- V + -2(V⋅N)N
	- =`V - 2(V⋅N)N`
