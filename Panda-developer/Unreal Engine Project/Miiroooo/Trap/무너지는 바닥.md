### Trap 설명
플레이어가 밟고 지나가면 흔들리다 무너지는 바닥 함정을 구현하였다.
무너지는 순간 밑에 Spike Trap에 닿여 Damage를 주는 함정이다.

바닥이 흔들리는 효과를 주기 위해서는 바닥을 여러개의 타일로 나눈 뒤, 타일을 서로 다르게 움직여야 한다. 이때, 타일의 움직임은 Rotation만 사용하여 원하는 효과를 낼 수 있다. (여기서는 4개의 타일로 나누도록 하겠다.)

Rotation을 계속해서 랜덤값으로 변경해주고, 타일이 서로 다른 Rotation을 가지도록 하면 바닥이 지진난 것 처럼 보이는 효과를 줄 수 있다.

<span style="color:rgb(255, 0, 0)">(타일 네 개 Rotation 계속 변경되는 예시 동영상)</span>

---

### 구현 순서
1. 플레이어가 Overlap 되면 0.5초 뒤에 Wobbling 실행 (첫 번째 타이머 실행)
2. Wobbling은 DeltaTime을 이용해서 지속적으로 4개의 타일 Rotation 값을 랜덤 값으로 변경
	1. Wobbling이 실행되는 순간부터는 플레이어의 Overlap 유무와 상관 없이 1.5초간 실행 (두 번째 타이머 실행)
3. Wobbling이 끝나면 바닥은 무너지고 아래의 Spike Trap 나타남.

---

### 구현 방법
#### 1. Overlap Event 발생


#### 2. Wobbling
Tile이 `bIsWobbling`이 `true`일 동안은 계속 흔들려야 한다. 그래서 Tick에서 Wobbling을 계속 호출할 수 있도록 해준다.
``` cpp
void ACollapsingTrap::Tick(float DeltaTime)
{
	Super::Tick(DeltaTime);
	if(bIsWobbling)
	{
		WobblingTheTile();
	}
}
```

4개의 타일이 회전해야 하므로 타일 인스턴스를 배열에 담고, for문을 사용하여 배열 전체에 랜덤한 회전값을 적용시키도록 한다.

타일은 x, y, z가 각자 다르게 회전해야 한다. 그래서 #FRandRange 를 사용해준다.
<span style="color:rgb(255, 0, 0)">(랜덤값이되, x,y,z가 다 같은 값이면 어떻게 동작하는지?)
(Lerp에서 CurrentTotation + RandomRotator가 아니고 InitRotation + 가 맞는지 확인</span>


#### 3. Collapsing Tile
Wobbling이 끝나면 타일이 무너지고, 아래의 Spike Trap이 나타나야 한다. 그러기 위해 각 타일의 SimulatePhysics를 true로 줘서 중력을 통해 공중에서 떨어지는 효과를 타일이 무너지는 것 처럼 보이게 사용한다.

그리고 Tick(Wobbling)이 더이상 실행되지 않도록 `bIsWobbling` 값을 `false`로 준다.

``` cpp
void ACollapsingTrap::EndWobbling()
{
	bIsWobbling = false;
	
	SM_Floor_0->SetSimulatePhysics(true);
	SM_Floor_1->SetSimulatePhysics(true);
	SM_Floor_2->SetSimulatePhysics(true);
	SM_Floor_3->SetSimulatePhysics(true);
}
```