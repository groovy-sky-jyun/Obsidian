
### 문제점
#### 1. 싱글톤도 결국 전역 변수이다.
싱글톤 또한 어디에서나 쉽게 접근이 가능하므로 전역변수와 같은 기능을 한다.
전역변수로 생각했을 때, 전역변수와 관련된 오류가 발생하면 원인을 찾기위해 전역변수에 접근하는 코드를 살펴보기 위해 수많은 줄의 코드를 확인해야 한다. (어디서나 접근이 가능하므로<span style="color:rgb(255, 192, 0)"> 어디에서 어떻게 쓰였을지 예측하기 어렵다.</span>)

또한 전역변수는 어디서나 접근하기 쉬우므로 그만큼 여러곳에 <span style="color:rgb(255, 192, 0)">강한 결합을 유발한다.
</span>

#### 2. 멀티스레딩에 맞지 않다.
전역변수를 멀티스레딩에 많이 사용하게 되면 교착상태, 경쟁 상태 등 스레드 동기화 버그가 생기기 쉽다.

#### 3. 초기화 제어가 어렵다.
시스템을 초기화 할 때 메모리 할당, 리소스 로딩 등 많은 작업이 필요하게 되면 시간이 오래 걸릴 수 있다. 하여 전투 도중 처음 소리를 재생할 때 싱글톤 초기화를 하게 된다면 공격 도중 <span style="color:rgb(255, 192, 0)">프레임이 떨어질 수 있다.</span> (성능 최적화 문제)

또한 <span style="color:rgb(255, 192, 0)">메모리 단편화를 막기 위해, 적절한 초기화 시점을 찾아야 한다.</span>
초기화 시점이 불규칙하면 힙 메모리 곳곳에 작은 메모리 조각들이 흩어지게 되어, 나중에 큰 메모리 블록을 할당하기 어려워진다.

---

### 대안
#### 1. 관리자 클래스를 제거하자.
주로 특정 객체들을 관리하는 관리자 클래스를 싱글톤으로 사용하는 경우가 많다.
허나 분명 관리자 클래스가 필요 없음에도 이를 싱글톤으로 생성하여 사용하는 경우도 있다.

<span style="color:rgb(255, 192, 0)">기능이 개별 객체에 속하고 독립적으로 동작하는 경우, 관리자 클래스를 제거하고 해당 기능을 하위 클래스에 직접 구현하자.</span> 그럼 불필요한 싱글톤 사용을 피하고, 코드의 결합도도 낮출 수 있다.

>###### 싱글톤 관리자 클래스가 유용한 경우
- 게임의 전역 상태 관리 : 게임 레벨, 점수, 플레이어 상태 등
- 하드웨어 리소스 접근 통제 : 사운드, 그래픽 장치 등 하드웨어 자원에 대한 접근 동기화
- 중앙 집중식 데이터 관리 : 인벤토리, 능력치 등 접근성이 높고, 유일해야하는 데이터를 관리해할 때

>###### 싱글톤 관리자 클래스가 필요하지 않은 경우
- 객체가 독립적일 때 : 다른 객체에 영향을 주지 않고, 독립적으로 관리되는 경우
- 관리자 클래스가 부가 기능만을 담당하는 경우 : 다른 클래스에 기능을 더해주는 역할만 하는 경우

#### 2. 이미 전역인 객체로부터 얻기
여러 싱글톤 객체를 만드는 대신, 하나의 전역 객체를 통해 다른 모든 핵십 시스템에 접근하는 방식을 적용하자.

싱글톤으로 만들고자 하는것을 기존 전역 객체에 생성하면 <span style="color:rgb(255, 192, 0)">하나의 전역 접근을 통해 여러 싱글톤 객체에 접근</span>할 수 있다.
```cpp title:Game
class Game{
public:
	static Game& instance() { return instance_; }

	Log& getLog() { return *log_; }
	FileSystem& getFileSystem() { return *fileSystem; }
	AudioPlayer& getAudioPlayer() { return *audioPlayer; }
	
private:
	static Game instance_;
	Log *log;
	FileSystem *fileSystem;
	AudioPlayer *audioPlayer;
}

//접근 방법
Game::instamce().getFileSystem();
```
